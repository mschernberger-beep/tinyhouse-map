<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interaktive POI-Karte – Smi´s Tiny House / Ebensee</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>
    body { margin:0; font-family: Arial, sans-serif; }
    h2 { padding:10px 10px 0; margin:0; }
    #map { width:100%; height:650px; }
    #filters {
      padding:10px;
      background:#f4f4f4;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .filter-btn {
      padding:6px 10px;
      background:#e0e0e0;
      border-radius:6px;
      cursor:pointer;
      border:1px solid #bbb;
      font-size:14px;
      user-select:none;
    }
    .filter-btn.active {
      background:#444;
      color:#fff;
    }
    .tiny-label {
      font-weight:bold;
      color:#c00;
    }
  </style>
</head>
<body>

<h2>Umgebung & Aktivitäten rund um Smi´s Tiny House – Ebensee</h2>
<div id="filters"></div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// Tiny House
const tinyHouse = {
  lat: 47.792130, lng: 13.760837,
  name: "Smi´s Tiny House",
  cats: ["Tiny House"],
  desc: "Dein Tiny House in Ebensee – idealer Ausgangspunkt für Seen, Wandern & Ausflüge.",
  isTiny: true
};

const pois = [
  tinyHouse,
  {lat:47.808333, lng:13.775000, name:"Ortszentrum Ebensee / Rathausplatz", cats:["Ausflug","Kultur"], desc:"Zentrum von Ebensee."},
  {lat:47.809360, lng:13.789990, name:"Strandbad Ebensee", cats:["See","Familie"], desc:"Öffentliches Strandbad."},
  {lat:47.809480, lng:13.789720, name:"Freizeitanlage Rindbach", cats:["See","Familie"], desc:"Liegewiese & Sportplatz."},
  {lat:47.803127, lng:13.797915, name:"Parkplatz Rindbach Wasserfall", cats:["Wandern","Ausflug"], desc:"Startpunkt zum Wasserfall."},
  {lat:47.813056, lng:13.758333, name:"Feuerkogel-Seilbahn Talstation", cats:["Wandern","Ausflug"], desc:"Auffahrt in die Bergwelt."},
  {lat:47.816667, lng:13.716667, name:"Feuerkogel Bergstation", cats:["Wandern","Familie"], desc:"Panorama & Rundwege."},
  {lat:47.834500, lng:13.688900, name:"Langbathsee Parkplatz", cats:["See","Wandern"], desc:"Startpunkt Rundwanderung."},
  {lat:47.837111, lng:13.700542, name:"Signalkogel Einstieg", cats:["Wandern"], desc:"Einstieg zum Signalkogel."},
  {lat:47.756949, lng:13.844605, name:"Parkplatz Offensee", cats:["See","Wandern"], desc:"Seerunde & Natur."},
  {lat:47.800023, lng:13.766891, name:"Karthalle Ebensee", cats:["Sport","Familie"], desc:"Indoor Kartbahn."},
  {lat:47.765350, lng:13.715324, name:"Naturmuseum Salzkammergut", cats:["Ausflug","Familie"], desc:"Museum mit Naturfokus."},
  {lat:47.807431, lng:13.774185, name:"Kino Ebensee", cats:["Kultur"], desc:"Kulturverein & Kino."},
  {lat:47.812722, lng:13.777250, name:"Segelclub Ebensee", cats:["Sport","See"], desc:"Segelrevier Traunsee."},
  {lat:47.823056, lng:13.842778, name:"Gassel-Tropfsteinhöhle", cats:["Wandern","Ausflug"], desc:"Tropfsteinhöhle."},
  {lat:47.800433, lng:13.777856, name:"Hotel Hochsteg Gütl", cats:["Essen","Ausflug"], desc:"Gastronomie & Wellness."},
  {lat:47.814208, lng:13.762970, name:"Gasthof Roitner", cats:["Essen"], desc:"Regionale Küche."}
];

const map = L.map('map');
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution:'© OpenStreetMap' }).addTo(map);
let markerLayer = L.layerGroup().addTo(map);

const categorySet = new Set();
pois.forEach(p => p.cats.forEach(c => { if(c!=="Tiny House") categorySet.add(c); }));
const categories = Array.from(categorySet).sort();

const filterDiv = document.getElementById('filters');
let activeCats = [];

const allBtn = document.createElement('div');
allBtn.className='filter-btn active';
allBtn.textContent='Alle Aktivitäten';
allBtn.onclick=()=>{ activeCats=[]; document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active')); allBtn.classList.add('active'); renderMarkers(); };
filterDiv.appendChild(allBtn);

categories.forEach(cat=>{
  const btn=document.createElement('div');
  btn.className='filter-btn';
  btn.textContent=cat;
  btn.onclick=()=>{
    allBtn.classList.remove('active');
    if(activeCats.includes(cat)){ activeCats=activeCats.filter(c=>c!==cat); btn.classList.remove('active'); }
    else { activeCats.push(cat); btn.classList.add('active'); }
    if(activeCats.length===0) allBtn.classList.add('active');
    renderMarkers();
  };
  filterDiv.appendChild(btn);
});

function renderMarkers(){
  markerLayer.clearLayers();
  const latLngs=[];
  pois.forEach(p=>{
    const inFilter = activeCats.length===0 || p.cats.some(c=>activeCats.includes(c)) || p.isTiny;
    if(!inFilter) return;
    L.marker([p.lat,p.lng]).addTo(markerLayer)
      .bindPopup(`<strong>${p.name}</strong><br>${p.desc}`);
    if(p.isTiny){
      L.circleMarker([p.lat,p.lng],{radius:10,color:'#ff3333',fillColor:'#ff3333',fillOpacity:0.7}).addTo(markerLayer);
    }
    latLngs.push([p.lat,p.lng]);
  });
  if(latLngs.length>0){
    const bounds=L.latLngBounds(latLngs);
    map.fitBounds(bounds,{padding:[20,20]});
  }
}
renderMarkers();
</script>
</body>
</html>
